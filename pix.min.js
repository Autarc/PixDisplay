function random(a,b,c){c=a;a=!b?0:a<=b?a:b;!b?a>c?b=a:b=c:b>c?b=b:b=c;a=a^b?a:c;return a+(0|Math.random()*(b-a+1))}var Display,Line,Point,Vector,interpolate,pos,randomColor,toRGB;pos=function(a){var b,c,d,e;if(a.pageX||a.pageY){d=a.pageX;e=a.pageY}else{d=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;e=a.clientY+document.body.scrollTop+document.documentElement.scrollTop}b=d;c=e;return[b,c]};randomColor=function(){return"rgb("+random(255)+","+random(255)+","+random(255)+")"};toRGB=function(a,b,c){return"rgb("+a+","+b+","+c+")"};interpolate=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=a.match(/\d+(\.\d+)?/g);b=b.match(/\d+(\.\d+)?/g);m=a[0];h=a[1];c=a[2];n=b[0];i=b[1];d=b[2];o=Math.max(m,n);p=Math.min(m,n);j=Math.max(h,i);k=Math.min(h,i);e=Math.max(c,d);f=Math.min(c,d);q=o-p;l=j-k;g=e-f;return[q,l,g]};Display=function(){function a(a,b){var c,d,e,f,g;this.id=a;this.fields=b;f=this;g=typeof this.id;switch(g){case"object":this.id=""+this.id;break;case"string":this.id=this.id;break;case"number":this.fields=this.id;break;default:console.log(g)}a=this.id;if(!document.getElementById(a)){c=document.createElement("canvas");c.id=a;c.className="Display";document.body.appendChild(c)}this.cvs=document.getElementById(a);this.cvs.style.cursor="pointer";d=this.cvs;this.ctx=d.getContext("2d");if(!this.fields)this.fields=50;b=this.fields;this.cvs.width=400;this.cvs.height=200;this.width=this.cvs.width;this.height=this.cvs.height;this.size=this.cvs.width/b;e=this.size;this.scaledWidth=this.width/e;this.scaledHeight=this.height/e;this.borders();document.onselectstart=function(){return false};d.addEventListener("mousedown",function(a){var b,c;b=pos(a)[0];c=pos(a)[1];b=Math.floor(b/e);c=Math.floor(c/e-.5);return this.tp=new Point(b,c,randomColor())});d.addEventListener("mouseup",function(a){var b,c,d,g;d=pos(a)[0];g=pos(a)[1];d=Math.floor(d/e);g=Math.floor(g/e-.5);c=new Point(d,g,randomColor());b=new Line(this.tp,c);return b.draw(f)})}a.prototype.pixFieldset=function(a){this.fields=a};a.prototype.pixSize=function(a){this.size=a;return this.displaySize(this.cvs.width,this.cvs.height)};a.prototype.displaySize=function(a,b){var c;c=this.cvs;c.width=a*this.size;c.height=b*this.size;while(!(c.width%this.size===0)){c.width-1}while(!(c.height%this.size===0)){c.height-1}return this.borders()};a.prototype.grid=function(){var a,b,c,d,e,f,g;a=this.ctx;b=this.cvs.height;c=this.cvs.width;for(d=0,f=this.size;0<=c?d<c:d>c;d+=f){a.moveTo(d,0);a.lineTo(d,b)}for(e=0,g=this.size;0<=b?e<b:e>b;e+=g){a.moveTo(0,e);a.lineTo(c,e)}if(this.gstate!==true){a.strokeStyle="rgba(100,100,100,0.5)";this.gstate=true}else{a.strokeStyle="rgba(255,255,255,1.0)";this.gstate=false}a.lineWidth=.5;return a.stroke()};a.prototype.borders=function(){var a,b,c;a=this.ctx;b=this.cvs.height;c=this.cvs.width;a.moveTo(0,0);a.lineTo(c,0);a.lineTo(c,b);a.lineTo(0,b);a.lineTo(0,0);return a.stroke()};a.prototype.drawPix=function(a,b,c){var d,e;e=this.size;d=c?c:"rgba(0,0,0,1.0)";this.ctx.fillStyle=d;return this.ctx.fillRect(a*e,b*e,e,e)};a.prototype.clear=function(){this.cvs.width=this.cvs.width;this.cvs.height=this.cvs.height;this.borders();if(this.gstate===true){this.gstate=false;return this.grid()}};return a}();Point=function(){function a(a,b,c){this.posX=a;this.posY=b;this.color=c;if(!this.color)this.color="rgba(0,0,0,1.0)"}a.prototype.translate=function(a){this.posX+=a.x;return this.posY+=a.y};a.prototype.subtractPoint=function(a){var b,c;b=this.posX-this.posX;c=this.posY-this.posY;return new Vector(b,c)};a.prototype.rotate=function(a){var b,c,d,e;c=Math.PI*a/180;b=Math.cos(c);e=Math.sin(c);d=this.posX;this.posX=b*this.posX-e*this.posY;return this.posY=e*d+b*this.posY};a.prototype.scale=function(a){this.posX*=a;return this.posY*=a};a.prototype.draw=function(a){this.Display=a;if(!(this.Display!=null))alert("Assigned to which Display ?");if(this.posX>this.Display.width||this.posY>this.Display.height){alert("Too high: "+this.posX+" | "+this.posY)}if(this.posX<0||this.pos<0){alert("Too low: "+this.posX+" | "+this.posY)}return this.Display.drawPix(this.posX,this.posY,this.color)};return a}();Vector=function(){function a(a,b){this.x=a;this.y=b}a.prototype.scale=function(a){this.x*=a;return this.y*=a};a.prototype.merge=function(a){this.x+=a.x;return this.y+=a.y};return a}();Line=function(){function a(a,b,c){this.p1=a;this.p2=b;this.color=c}a.prototype.hasColor=function(){return!!this.color};a.prototype.rotate=function(a){this.p1.rotate(a);return this.p2.rotate(a)};a.prototype.rotateAroundAPoint=function(a,b){var c,d,e,f;c=this.p1;d=this.p2;e=new Vector(-a.posX,-a.posY);c.translate(e);d.translate(e);this.rotate(b);f=new Vector(a.posX,a.posY);c.translate(f);return d.translate(f)};a.prototype.rotateAroundMidd=function(){var a,b,c;b=Math.round((this.p2.x+this.p1.x)/2);c=Math.round((this.p2.y+this.p1.y)/2);a=new Point(b,c);return this.rotateAroundPoint(a)};a.prototype.translate=function(a){this.p1.translate(a);return this.p2.translate(a)};a.prototype.scale=function(a){this.p1.scale(a);return this.p2.scale(a)};a.prototype.draw=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;this.Display=a;x=this.p1.posX;y=this.p2.posX;A=this.p1.posY;B=this.p2.posY;if(!(y>=x)){u=x;v=A;x=y;A=B;y=u;B=v}j=y-x;k=B-A;o=0;h=0;p=0;e=0;q=0;f=0;if(Math.abs(j)>Math.abs(k)){l=x;m=y;p=1;e=1;if(B>=A){g=2*k-j;o=2*k;h=2*(k-j);f=1}else{g=2*-k-j;o=2*-k;h=2*(-k-j);f=-1}}else{l=A;m=B;e=1;if(B>A){g=2*j-k;o=2*j;h=2*(j-k);f=1;q=1}else{l=B;m=A;g=2*j+k;o=2*j;h=2*(j+k);q=-1;f=-1}}t=m-l;i=interpolate(this.p1.color,this.p2.color);s=0|i[0]/t;n=0|i[1]/t;c=0|i[2]/t;d=this.p1.color;d=d.match(/\d+(\.\d+)?/g);b=toRGB(d[0],d[1],d[2]);w=x;z=A;r=new Point(w,z,b);r.draw(this.Display);C=[];while(l<=m){if(g<=0){g+=o;w+=p;z+=q}else{g+=h;w+=e;z+=f}l++;d=[+d[0]+s,+d[1]+n,+d[2]+c];b=toRGB(+d[0],+d[1],+d[2]);r=new Point(w,z,b);C.push(r.draw(this.Display))}return C};return a}()